(function(){var e={2615:function(){},6272:function(e,t,s){"use strict";var a=s(5130),i=s(6768);function n(e,t,s,a,n,o){const r=(0,i.g2)("router-view"),c=(0,i.g2)("CallListener");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r),(0,i.bF)(c)])}const o={style:{display:"none"}};function r(e,t,s,a,n,r){return(0,i.uX)(),(0,i.CE)("div",o)}var c=s(2615),l=s.n(c),d=s(1241);const u=(0,d.A)(l(),[["render",r]]);var h=u,p={name:"App",components:{CallListener:h}};const m=(0,d.A)(p,[["render",n]]);var g=m,f=s(1387),b=s(4232);const y={class:"container-fluid p-0"},w={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},k={class:"mb-0 text-white text-center fw-bold flex-grow-1"},v={class:"d-flex gap-4 me-3"},L={class:"row g-0 mb-1"},x={class:"col-12 col-md-9 d-flex flex-column"},C={key:0,ref:"chatContainer",class:"flex-grow-1 p-3 overflow-auto",style:{height:"88vh"}},S={class:"d-inline-block text-start",style:{"max-width":"70%"}},E=["href"],A={class:"small text-white mt-1",style:{"font-size":"0.75rem"}},I={key:1,class:"text-center my-auto"},D={class:"sticky-bottom border-top bg-dark mt-2"},U={key:0,class:"p-3"},M={class:"d-flex align-items-end"};function _(e,t,s,n,o,r){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",y,[(0,i.Lk)("div",w,[(0,i.bF)(c,{class:"me-2",to:"/contact"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"bi bi-arrow-left fs-3"},null,-1)]))),_:1,__:[6]}),(0,i.Lk)("h5",k,(0,b.v_)(this.toUser),1),(0,i.Lk)("div",v,[(0,i.Lk)("div",{class:"",onClick:t[0]||(t[0]=e=>r.startVideoCall())},t[7]||(t[7]=[(0,i.Lk)("i",{class:"bi bi-camera-video-fill text-dark fs-5"},null,-1)])),(0,i.Lk)("div",{class:"",onClick:t[1]||(t[1]=(...t)=>e.startAudioCall&&e.startAudioCall(...t)),title:"Audio Call"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"bi bi-telephone-fill text-white fs-5"},null,-1)]))])]),(0,i.Lk)("div",L,[(0,i.Lk)("div",x,[o.user?((0,i.uX)(),(0,i.CE)("div",C,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.messages,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,b.C4)([e.sender===o.user.uid?"text-end":"text-start","mb-2"])},[(0,i.Lk)("div",S,[(0,i.Lk)("span",{class:(0,b.C4)(["p-2 rounded shadow-sm d-inline-block",e.sender===o.user.uid?"bg-primary text-white":"bg-light text-dark"]),style:{"word-wrap":"break-word"}},[r.isValidUrl(e.text)?((0,i.uX)(),(0,i.CE)("a",{key:0,href:e.text,target:"_blank",class:"text-decoration-underline text-dark"},(0,b.v_)(e.text),9,E)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,b.v_)(e.text),1)],64))],2)]),(0,i.Lk)("div",A,(0,b.v_)(r.formatTime(e.createdAt)),1)],2)))),128))],512)):((0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.signInAnonymously&&r.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])]),(0,i.Lk)("footer",D,[o.user?((0,i.uX)(),(0,i.CE)("div",U,[(0,i.Lk)("div",M,[(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newMessage=e),onKeyup:t[4]||(t[4]=(0,a.jR)((0,a.D$)(((...e)=>r.sendMessage&&r.sendMessage(...e)),["prevent"]),["enter"])),class:"me-2 message-input",placeholder:"Type your message...",rows:"1"},null,544),[[a.Jo,o.newMessage]]),(0,i.Lk)("button",{class:"btn btn-primary send-btn d-flex align-items-center justify-content-center",onClick:t[5]||(t[5]=(...e)=>r.sendMessage&&r.sendMessage(...e))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"bi bi-send fs-5"},null,-1)]))])])):(0,i.Q3)("",!0)])])}s(4114),s(8111),s(1701);var P=s(6400),T=s(7617),$=s(7236);const V={apiKey:"AIzaSyDBRFrzmnXigqP9au3WohG5GvFg7cJd4YI",authDomain:"zchat-f2b41.firebaseapp.com",projectId:"zchat-f2b41",storageBucket:"zchat-f2b41.firebasestorage.app",messagingSenderId:"711186608249",appId:"1:711186608249:web:f53b41a0ae630e952c24a8",measurementId:"G-VXDF17PGNX"},j=(0,P.Wp)(V),X=(0,T.aU)(j),O=(0,$.xI)(j);var R={name:"ChatApp",data(){return{user:{},uid:null,newMessage:"",messages:[],toUid:this.$route.params.id||null,toUser:null}},methods:{async signInAnonymously(){try{const e=await(0,$.zK)(O);this.user=e.user,this.uid=this.user.uid}catch(e){console.error("Anonymous login error:",e),this.$router.push("/")}},async sendMessage(){if(""!==this.newMessage.trim())if(this.user&&this.user.uid)try{await(0,T.gS)((0,T.rJ)(X,"messages"),{text:this.newMessage,sender:this.user.uid,uid:this.user.uid,reciever:this.toUid,createdAt:(0,T.O5)()}),this.newMessage=""}catch(e){alert("Message sending failed: "+e.message)}else alert("User not authenticated!")},async getUserData(e){try{const t=await(0,T.x7)((0,T.H9)(X,"users",e));t.exists()?this.toUser=t.data().name||"Anonymous":console.error("No such user!")}catch(t){console.error("Error fetching user data:",t)}},scrollToBottom(){const e=this.$refs.chatContainer;e&&(e.scrollTop=e.scrollHeight)},isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}},formatTime(e){if(!e)return"";const t=e instanceof Date?e:e.toDate?.()||new Date(e),s=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return`${s}:${a}`},loginStatus(){return new Promise(((e,t)=>{(0,$.hg)(O,(s=>{s?(this.user=s,this.uid=s.uid,e(s)):(this.$router.push("/"),t("No user"))}))}))},startVideoCall(){this.$router.push({name:"vdiocall",params:{id:this.toUid}})}},async mounted(){try{const e=await this.loginStatus();await this.getUserData(this.toUid);const t=(0,T.P)((0,T.rJ)(X,"messages"),(0,T.or)((0,T.Uo)((0,T._M)("sender","==",e.uid),(0,T._M)("reciever","==",this.toUid)),(0,T.Uo)((0,T._M)("sender","==",this.toUid),(0,T._M)("reciever","==",e.uid))),(0,T.My)("createdAt"));(0,T.aQ)(t,(async t=>{this.messages=t.docs.map((e=>({...e.data(),id:e.id}))),await(0,i.dY)(),this.scrollToBottom(),this.messages.length>0&&(this.lastMessage=this.messages[this.messages.length-1],this.lastMessage.sender!==e.uid&&this.showNotification("🔔 New Message",{body:`New message: ${this.lastMessage.text}`,icon:"https://cdn-icons-png.flaticon.com/512/190/190411.png",badge:"https://cdn-icons-png.flaticon.com/512/190/190411.png",data:{url:"https://zakir-git.github.io/zchat/#/chat/"+this.toUid}}))}))}catch(e){console.error("Error during mount:",e)}}};const N=(0,d.A)(R,[["render",_],["__scopeId","data-v-6fcb1708"]]);var z=N;const J={class:"d-flex justify-content-center align-items-center vh-100 bg-dark"},F={class:"card shadow-lg rounded-4 text-white px-4 py-5",style:{width:"100%","max-width":"420px","background-color":"#212529"}},B={class:"text-center mb-4"},H={class:"mb-3"},K={class:"input-group"},q={class:"mb-3"},W={class:"input-group"},G=["type"],Q={class:"mt-3 text-center"},Y={class:"mb-3"},Z={class:"input-group"},ee={class:"mb-3"},te={class:"input-group"},se={class:"mb-3"},ae={class:"input-group"},ie=["type"],ne={class:"mt-3 text-center"};function oe(e,t,s,n,o,r){return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",F,[(0,i.Lk)("h2",B,(0,b.v_)(o.isLogin?"Login":"Register"),1),o.isLogin?((0,i.uX)(),(0,i.CE)("form",{key:0,onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>r.loginUser&&r.loginUser(...e)),["prevent"]))},[(0,i.Lk)("div",H,[t[12]||(t[12]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",K,[t[11]||(t[11]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",q,[t[14]||(t[14]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",W,[t[13]||(t[13]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:o.showPassword?"text":"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:""},null,8,G),[[a.hp,o.password]]),(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white",onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e)),style:{cursor:"pointer"}},[(0,i.Lk)("i",{class:(0,b.C4)(o.showPassword?"bi bi-eye-slash-fill":"bi bi-eye-fill")},null,2)])])]),t[16]||(t[16]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 shadow-sm"},"Login",-1)),(0,i.Lk)("p",Q,[t[15]||(t[15]=(0,i.eW)(" Don't have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[3]||(t[3]=(0,a.D$)((e=>o.isLogin=!1),["prevent"])),class:"text-info"},"Register here")])],32)):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[10]||(t[10]=(0,a.D$)(((...e)=>r.registerUser&&r.registerUser(...e)),["prevent"]))},[(0,i.Lk)("div",Y,[t[18]||(t[18]=(0,i.Lk)("label",null,"Full Name",-1)),(0,i.Lk)("div",Z,[t[17]||(t[17]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-person-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[5]||(t[5]=e=>o.name=e),required:""},null,512),[[a.Jo,o.name]])])]),(0,i.Lk)("div",ee,[t[20]||(t[20]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",te,[t[19]||(t[19]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[6]||(t[6]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",se,[t[22]||(t[22]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",ae,[t[21]||(t[21]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:o.showPassword?"text":"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[7]||(t[7]=e=>o.password=e),required:""},null,8,ie),[[a.hp,o.password]]),(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white",onClick:t[8]||(t[8]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e)),style:{cursor:"pointer"}},[(0,i.Lk)("i",{class:(0,b.C4)(o.showPassword?"bi bi-eye-slash-fill":"bi bi-eye-fill")},null,2)])])]),t[24]||(t[24]=(0,i.Lk)("button",{type:"submit",class:"btn btn-success w-100 shadow-sm"},"Register",-1)),(0,i.Lk)("p",ne,[t[23]||(t[23]=(0,i.eW)(" Already have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[9]||(t[9]=(0,a.D$)((e=>o.isLogin=!0),["prevent"])),class:"text-info"},"Login here")])],32))])])}var re={name:"LoginRegister",data(){return{isLogin:!0,email:"",password:"",name:"",showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async loginUser(){try{await(0,$.x9)(O,this.email,this.password),this.$router.push("/contact")}catch(e){alert("Login failed: "+e.message)}},async registerUser(){try{const e=await(0,$.eJ)(O,this.email,this.password),t=e.user;await(0,$.r7)(t,{displayName:this.name}),await(0,T.BN)((0,T.H9)(X,"users",t.uid),{uid:t.uid,name:this.name,email:this.email,createdAt:new Date}),this.isLogin=!0,alert("Registration successful! Please login."),this.name=this.email=this.password=""}catch(e){alert("Registration failed: "+e.message)}}}};const ce=(0,d.A)(re,[["render",oe],["__scopeId","data-v-254a9c60"]]);var le=ce;const de={key:0,class:"container"},ue={ref:"remoteVideo",autoplay:"",playsinline:"",muted:"",class:"remote-video"},he={ref:"localVideo",autoplay:"",playsinline:"",muted:"",class:"local-video"},pe={class:"controls d-flex justify-content-center gap-3 mt-3"};function me(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[n.user?((0,i.uX)(),(0,i.CE)("div",de,[(0,i.Lk)("video",ue,null,512),(0,i.Lk)("video",he,null,512),(0,i.Lk)("div",pe,[(0,i.Lk)("button",{class:"btn btn-danger d-flex align-items-center btn-sm gap-2",onClick:t[0]||(t[0]=(...e)=>o.endCall&&o.endCall(...e))},t[2]||(t[2]=[(0,i.Lk)("i",{class:"bi bi-telephone"},null,-1),(0,i.eW)(" End ")]))])])):((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously "))])}s(7588);var ge={data(){return{pc:null,localStream:null,remoteStream:null,remoteDescriptionSet:!1,pendingCandidates:[],user:null,callDocId:null}},methods:{async signInAnonymously(){try{this.$router.push("/")}catch(e){console.error("Anonymous login error:",e)}},async endCall(){try{if(this.localStream&&(this.localStream.getTracks().forEach((e=>e.stop())),this.localStream=null),this.pc&&(this.pc.close(),this.pc=null),this.$refs.remoteVideo&&(this.$refs.remoteVideo.srcObject=null),this.$refs.localVideo&&(this.$refs.localVideo.srcObject=null),this.callDocId){const e=(0,T.H9)(X,"calls",this.callDocId);await(0,T.kd)(e),console.log("📂 Firestore call document deleted.")}else console.warn("⚠️ No callDocId found. Skipping Firestore delete.");this.$router.go(-1),console.log("📞 Call ended successfully.")}catch(e){console.error("❌ Error ending call:",e)}},async startCall(){const e=this.user.uid,t=this.$route.params.id;this.callDocId=[e,t].sort().join("_"),this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error("Media Error:",r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const s=(0,T.H9)(X,"calls",this.callDocId);await(0,T.BN)(s,{sender:e,receiver:t,createdAt:Date.now()});const a=(0,T.rJ)(s,"offerCandidates"),i=(0,T.rJ)(s,"answerCandidates");this.pc.onicecandidate=async e=>{if(e.candidate)try{await(0,T.gS)(a,e.candidate.toJSON())}catch(r){console.error("Error adding ICE candidate: ",r)}};const n=await this.pc.createOffer();await this.pc.setLocalDescription(n);const o={type:n.type,sdp:n.sdp};await(0,T.BN)(s,{offer:o},{merge:!0}),(0,T.aQ)(s,(e=>{const t=e.data();if(t?.answer&&!this.pc.currentRemoteDescription){const e=new RTCSessionDescription(t.answer);this.pc.setRemoteDescription(e)}})),(0,T.aQ)(i,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());try{if(this.pc.remoteDescription&&null!==this.pc.remoteDescription.type)await this.pc.addIceCandidate(t);else{const e=setInterval((async()=>{this.pc.remoteDescription&&null!==this.pc.remoteDescription.type&&(await this.pc.addIceCandidate(t),clearInterval(e))}),100)}}catch(r){console.error("Error adding remote ICE candidate:",r)}}}))}))},async answerCall(){this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error(r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const e=(0,T.H9)(X,"calls",this.callDocId),t=(0,T.rJ)(e,"offerCandidates"),s=(0,T.rJ)(e,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,T.gS)(s,e.candidate.toJSON())};const a=await(0,T.x7)(e);if(!a.exists())return void alert("Call not found!");const i=a.data().offer;await this.pc.setRemoteDescription(new RTCSessionDescription(i)),this.remoteDescriptionSet=!0;const n=await this.pc.createAnswer();await this.pc.setLocalDescription(n);const o={type:n.type,sdp:n.sdp};await(0,T.BN)(e,{answer:o},{merge:!0}),this.pendingCandidates||(this.pendingCandidates=[]),(0,T.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());this.remoteDescriptionSet?await this.pc.addIceCandidate(t):this.pendingCandidates.push(t)}}))}))}},mounted(){const e=(0,$.xI)();(0,$.hg)(e,(async t=>{if(t)this.user=t,this.startCall();else try{await(0,$.zK)(e),console.log("✅ Signed in anonymously.")}catch(s){console.error("❌ Anonymous Sign In Error:",s)}}))}};const fe=(0,d.A)(ge,[["render",me]]);var be=fe;const ye={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},we={class:"offcanvas offcanvas-end custom-offcanvas w-50",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},ke={class:"offcanvas-body d-flex flex-column gap-4"},ve={class:"container py-4"},Le={key:0,class:"overflow-hidden bg-dark"},xe={class:"list-group list-group-flush"},Ce=["onClick"],Se=["src"],Ee={class:"flex-grow-1"},Ae={class:"d-flex justify-content-between align-items-center"},Ie={class:"mb-0 fw-semibold text-white"},De={key:1,class:"text-center my-auto"};function Ue(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",ye,[t[5]||(t[5]=(0,i.Lk)("h5",{class:"mb-0 text-white text-center fw-bold flex-grow-1"},"Z CHAT",-1)),t[6]||(t[6]=(0,i.Lk)("div",{class:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-white"})],-1)),(0,i.Lk)("div",we,[t[4]||(t[4]=(0,i.Lk)("div",{class:"offcanvas-header border-bottom border-secondary"},[(0,i.Lk)("h5",{class:"offcanvas-title text-white",id:"offcanvasRightLabel"},[(0,i.Lk)("i",{class:"bi bi-list me-2"}),(0,i.eW)(" Menu ")]),(0,i.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),(0,i.Lk)("div",ke,[t[3]||(t[3]=(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-info"}),(0,i.Lk)("span",{class:"fw-semibold text-white"},"Profile")],-1)),(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item",onClick:t[0]||(t[0]=e=>o.logout()),style:{cursor:"pointer"}},t[2]||(t[2]=[(0,i.Lk)("i",{class:"bi bi-box-arrow-right fs-4 text-danger"},null,-1),(0,i.Lk)("span",{class:"fw-semibold text-danger"},"Logout",-1)]))])])]),(0,i.Lk)("div",ve,[n.user?((0,i.uX)(),(0,i.CE)("div",Le,[(0,i.Lk)("div",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredContacts,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.uid,onClick:t=>o.startChat(e.uid),class:"list-group-item d-flex align-items-center gap-3 px-4 py-3 contact-item"},[(0,i.Lk)("img",{src:e.avatar||n.defaultAvatar,alt:"Profile",class:"rounded-circle",width:"55",height:"55"},null,8,Se),(0,i.Lk)("div",Ee,[(0,i.Lk)("div",Ae,[(0,i.Lk)("h6",Ie,(0,b.v_)(e.name),1)]),t[7]||(t[7]=(0,i.Lk)("div",{class:"text-white"},"You :Hi",-1))])],8,Ce)))),128))])])):((0,i.uX)(),(0,i.CE)("div",De,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])])}s(2489);var Me={name:"contactList",data(){return{contacts:[],user:null,defaultAvatar:"https://static.vecteezy.com/system/resources/previews/032/176/191/non_2x/business-avatar-profile-black-icon-man-of-user-symbol-in-trendy-flat-style-isolated-on-male-profile-people-diverse-face-for-social-network-or-web-vector.jpg"}},computed:{filteredContacts(){return this.user?this.contacts.filter((e=>e.uid!==this.user.uid)):this.contacts}},methods:{async signInAnonymously(){try{const e=await(0,$.zK)(O);this.user=e.user,await this.fetchContacts()}catch(e){Ve.push("/"),console.error("Anonymous login error:",e)}},async fetchContacts(){try{const e=await(0,T.GG)((0,T.rJ)(X,"users"));this.contacts=[],e.forEach((e=>{const t=e.data();this.user&&t.uid===this.user.uid||this.contacts.push(t)}))}catch(e){console.error("Error fetching contacts:",e)}},logout(){const e=confirm("Are you sure you want to logout?");e&&(0,$.CI)(O).then((()=>{this.user=null,this.$router.push("/")})).catch((e=>{alert("Logout failed: "+e.message)}))},startChat(e){this.$router.push({name:"chat",params:{id:e}})}},mounted(){(0,$.hg)(O,(e=>{this.user=e,e?this.fetchContacts():this.signInAnonymously()}))}};const _e=(0,d.A)(Me,[["render",Ue],["__scopeId","data-v-8dc463ac"]]);var Pe=_e;const Te=[{path:"/chat",name:"chat",component:z},{path:"/chat/:id",name:"chat",component:z},{path:"/",name:"login",component:le},{path:"/vdiocall/:id",name:"vdiocall",component:be},{path:"/contact",name:"contact",component:Pe}],$e=(0,f.aE)({history:(0,f.Bt)("/zchat/"),routes:Te});var Ve=$e,je=(s(8077),s(7411)),Xe=(s(7917),{data(){return{lastMessage:{}}},methods:{async showNotification(e,t={}){if(!("Notification"in window))return void console.warn("❌ This browser does not support notifications.");const s=await Notification.requestPermission();if("granted"===s){const s=new Notification(e,t);s.onclick=()=>{console.log("Notification clicked!"),t.data?.url&&window.open(t.data.url,"_blank")}}else console.warn("Notification permission not granted!")}}});const Oe=(0,a.Ef)(g);Oe.use(Ve),Oe.mixin(Xe),Oe.use(je.Ay),Oe.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var d=c(s)}for(t&&t(a);l<o.length;l++)n=o[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkvue_z_chat"]=self["webpackChunkvue_z_chat"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(6272)}));a=s.O(a)})();
//# sourceMappingURL=app.32ba0711.js.map