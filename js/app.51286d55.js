(function(){"use strict";var e={9509:function(e,t,s){var a=s(5130),i=s(6768);function n(e,t,s,a,n,o){const r=(0,i.g2)("router-view"),c=(0,i.g2)("CallListener");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r),(0,i.bF)(c)])}const o={style:{display:"none"}};function r(e,t,s,a,n,r){return(0,i.uX)(),(0,i.CE)("div",o)}var c=s(7236),l=s(7617),d=s(6400);const u={apiKey:"AIzaSyDBRFrzmnXigqP9au3WohG5GvFg7cJd4YI",authDomain:"zchat-f2b41.firebaseapp.com",projectId:"zchat-f2b41",storageBucket:"zchat-f2b41.firebasestorage.app",messagingSenderId:"711186608249",appId:"1:711186608249:web:f53b41a0ae630e952c24a8",measurementId:"G-VXDF17PGNX"},h=(0,d.Wp)(u),m=(0,l.aU)(h),p=(0,c.xI)(h);var f={name:"CallListener",data(){return{user:null,remoteDescriptionSet:!1,callDocId:"video-call-room"}},methods:{showNotification(e,t){"granted"===Notification.permission?new Notification(e,t):"denied"!==Notification.permission&&Notification.requestPermission().then((s=>{"granted"===s&&new Notification(e,t)}))},async answerCall(){alert("Answering call... implement the logic here."),this.remoteDescriptionSet=!0}},mounted(){(0,c.hg)(p,(async e=>{if(e){this.user=e;const t=e.uid,s=(0,l.H9)(m,"calls",this.callDocId);(0,l.aQ)(s,(e=>{if(e.exists()){const s=e.data();s.offer&&!this.remoteDescriptionSet&&s.offer.receiver===t&&(this.showNotification("ðŸ“ž Incoming call from "+s.offer.sender,{body:"Do you want to answer the call?",icon:"https://cdn-icons-png.flaticon.com/512/5978/5978995.png"}),confirm("ðŸ“ž Incoming call...\nDo you want to receive?")&&this.answerCall())}}))}else try{await(0,c.zK)(p),console.log("âœ… Signed in anonymously.")}catch(t){console.error("âŒ Anonymous Sign In Error:",t)}}))}},g=s(1241);const y=(0,g.A)(f,[["render",r]]);var b=y,w={name:"App",components:{CallListener:b}};const v=(0,g.A)(w,[["render",n]]);var k=v,L=s(1387),x=s(4232);const C={class:"container-fluid p-0"},S={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},D={class:"mb-0 text-white text-center fw-bold flex-grow-1"},I={class:"d-flex gap-4 me-3"},A={class:"row g-0"},E={class:"col-12 col-md-9 d-flex flex-column"},U={key:0,ref:"chatContainer",class:"flex-grow-1 p-3 overflow-auto",style:{height:"88vh"}},M=["href"],N={key:1,class:"text-center my-auto"},_={class:"sticky-bottom border-top bg-dark"},$={key:0,class:"p-3"},T={class:"d-flex align-items-end"};function j(e,t,s,n,o,r){return(0,i.uX)(),(0,i.CE)("div",C,[(0,i.Lk)("div",S,[(0,i.Lk)("div",{class:"me-2",onClick:t[0]||(t[0]=t=>e.$router.back()),title:"Back"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"bi bi-arrow-left fs-3"},null,-1)])),(0,i.Lk)("h5",D,(0,x.v_)(this.toUser),1),(0,i.Lk)("div",I,[(0,i.Lk)("div",{class:"",onClick:t[1]||(t[1]=e=>r.startVideoCall())},t[8]||(t[8]=[(0,i.Lk)("i",{class:"bi bi-camera-video-fill text-dark fs-5"},null,-1)])),(0,i.Lk)("div",{class:"",onClick:t[2]||(t[2]=(...t)=>e.startAudioCall&&e.startAudioCall(...t)),title:"Audio Call"},t[9]||(t[9]=[(0,i.Lk)("i",{class:"bi bi-telephone-fill text-white fs-5"},null,-1)]))])]),(0,i.Lk)("div",A,[(0,i.Lk)("div",E,[o.user?((0,i.uX)(),(0,i.CE)("div",U,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.messages,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,x.C4)([e.sender===o.user.uid?"text-end":"text-start","mb-2"])},[(0,i.Lk)("span",{class:(0,x.C4)(["p-2 rounded shadow-sm d-inline-block",e.sender===o.user.uid?"bg-primary text-white":"bg-light text-dark"]),style:{"max-width":"70%","word-wrap":"break-word"}},[r.isValidUrl(e.text)?((0,i.uX)(),(0,i.CE)("a",{key:0,href:e.text,target:"_blank",class:"text-decoration-underline"},(0,x.v_)(e.text),9,M)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,x.v_)(e.text),1)],64))],2)],2)))),128))],512)):((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.signInAnonymously&&r.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])]),(0,i.Lk)("footer",_,[o.user?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("div",T,[(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newMessage=e),onKeyup:t[5]||(t[5]=(0,a.jR)((0,a.D$)(((...e)=>r.sendMessage&&r.sendMessage(...e)),["prevent"]),["enter"])),class:"me-2 message-input",placeholder:"Type your message...",rows:"1"},null,544),[[a.Jo,o.newMessage]]),(0,i.Lk)("button",{class:"btn btn-primary send-btn d-flex align-items-center justify-content-center",onClick:t[6]||(t[6]=(...e)=>r.sendMessage&&r.sendMessage(...e))},t[10]||(t[10]=[(0,i.Lk)("i",{class:"bi bi-send fs-5"},null,-1)]))])])):(0,i.Q3)("",!0)])])}s(4114),s(8111),s(1701);var X={name:"ChatApp",data(){return{user:{},uid:null,newMessage:"",messages:[],toUid:this.$route.params.id||null,toUser:null}},methods:{async signInAnonymously(){try{const e=await(0,c.zK)(p);this.user=e.user,this.uid=this.user.uid}catch(e){console.error("Anonymous login error:",e),this.$router.push("/")}},async sendMessage(){if(""!==this.newMessage.trim())if(this.user&&this.user.uid)try{await(0,l.gS)((0,l.rJ)(m,"messages"),{text:this.newMessage,sender:this.user.uid,uid:this.user.uid,reciever:this.toUid,createdAt:(0,l.O5)()}),this.newMessage=""}catch(e){alert("Message sending failed: "+e.message)}else alert("User not authenticated!")},async getUserData(e){try{const t=await(0,l.x7)((0,l.H9)(m,"users",e));t.exists()?this.toUser=t.data().name||"Anonymous":console.error("No such user!")}catch(t){console.error("Error fetching user data:",t)}},scrollToBottom(){const e=this.$refs.chatContainer;e&&(e.scrollTop=e.scrollHeight)},isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}},loginStatus(){return new Promise(((e,t)=>{(0,c.hg)(p,(s=>{s?(this.user=s,this.uid=s.uid,e(s)):(this.$router.push("/"),t("No user"))}))}))},startVideoCall(){this.$router.push({name:"vdiocall",params:{id:this.toUid}})}},async mounted(){try{const e=await this.loginStatus();this.currentUid=e.uid,await this.getUserData(this.toUid);const t=(0,l.P)((0,l.rJ)(m,"messages"),(0,l.or)((0,l.Uo)((0,l._M)("sender","==",e.uid),(0,l._M)("reciever","==",this.toUid)),(0,l.Uo)((0,l._M)("sender","==",this.toUid),(0,l._M)("reciever","==",e.uid))),(0,l.My)("createdAt"));(0,l.aQ)(t,(async t=>{this.messages=t.docs.map((e=>({...e.data(),id:e.id}))),await(0,i.dY)(),this.scrollToBottom(),this.messages.length>0&&(this.lastMessage=this.messages[this.messages.length-1],this.lastMessage.sender!==e.uid&&this.showNotification("ðŸ”” New Message",{body:`New message: ${this.lastMessage.text}`,icon:"https://cdn-icons-png.flaticon.com/512/190/190411.png",badge:"https://cdn-icons-png.flaticon.com/512/190/190411.png",data:{url:"http://localhost:8080/zchat/#/chat/"+this.toUid}}))}));const s="video-call-room",a=(0,l.H9)(m,"calls",s);(0,l.aQ)(a,(e=>{if(e.exists()){const t=e.data();t.offer&&!this.remoteDescriptionSet&&t.offer.receiver===this.currentUid&&(this.showNotification("ðŸ“ž Incoming call from "+t.offer.sender,{body:"Do you want to answer the call?",icon:"https://cdn-icons-png.flaticon.com/512/5978/5978995.png"}),confirm("ðŸ“ž Incoming call...\nDo you want to receive?")&&this.answerCall())}}))}catch(e){console.error("Error during mount:",e)}}};const O=(0,g.A)(X,[["render",j],["__scopeId","data-v-04c5299e"]]);var R=O;const V={class:"d-flex justify-content-center align-items-center vh-100 bg-dark"},J={class:"card shadow-lg rounded-4 text-white px-4 py-5",style:{width:"100%","max-width":"420px","background-color":"#212529"}},P={class:"text-center mb-4"},z={class:"mb-3"},F={class:"input-group"},H={class:"mb-3"},B={class:"input-group"},K={class:"mt-3 text-center"},q={class:"mb-3"},Q={class:"input-group"},W={class:"mb-3"},G={class:"input-group"},Y={class:"mb-3"},Z={class:"input-group"},ee={class:"mt-3 text-center"};function te(e,t,s,n,o,r){return(0,i.uX)(),(0,i.CE)("div",V,[(0,i.Lk)("div",J,[(0,i.Lk)("h2",P,(0,x.v_)(o.isLogin?"Login":"Register"),1),o.isLogin?((0,i.uX)(),(0,i.CE)("form",{key:0,onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>r.loginUser&&r.loginUser(...e)),["prevent"]))},[(0,i.Lk)("div",z,[t[10]||(t[10]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",F,[t[9]||(t[9]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",H,[t[12]||(t[12]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",B,[t[11]||(t[11]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[14]||(t[14]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 shadow-sm"},"Login",-1)),(0,i.Lk)("p",K,[t[13]||(t[13]=(0,i.eW)(" Don't have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,a.D$)((e=>o.isLogin=!1),["prevent"])),class:"text-info"},"Register here")])],32)):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>r.registerUser&&r.registerUser(...e)),["prevent"]))},[(0,i.Lk)("div",q,[t[16]||(t[16]=(0,i.Lk)("label",null,"Full Name",-1)),(0,i.Lk)("div",Q,[t[15]||(t[15]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-person-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[4]||(t[4]=e=>o.name=e),required:""},null,512),[[a.Jo,o.name]])])]),(0,i.Lk)("div",W,[t[18]||(t[18]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",G,[t[17]||(t[17]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[5]||(t[5]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",Y,[t[20]||(t[20]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",Z,[t[19]||(t[19]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[6]||(t[6]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[22]||(t[22]=(0,i.Lk)("button",{type:"submit",class:"btn btn-success w-100 shadow-sm"},"Register",-1)),(0,i.Lk)("p",ee,[t[21]||(t[21]=(0,i.eW)(" Already have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[7]||(t[7]=(0,a.D$)((e=>o.isLogin=!0),["prevent"])),class:"text-info"},"Login here")])],32))])])}var se={name:"LoginRegister",data(){return{isLogin:!0,email:"",password:"",name:""}},methods:{async loginUser(){try{await(0,c.x9)(p,this.email,this.password),this.$router.push("/contact")}catch(e){alert("Login failed: "+e.message)}},async registerUser(){try{const e=await(0,c.eJ)(p,this.email,this.password),t=e.user;await(0,c.r7)(t,{displayName:this.name}),await(0,l.BN)((0,l.H9)(m,"users",t.uid),{uid:t.uid,name:this.name,email:this.email,createdAt:new Date}),this.isLogin=!0,alert("Registration successful! Please login."),this.name=this.email=this.password=""}catch(e){alert("Registration failed: "+e.message)}}}};const ae=(0,g.A)(se,[["render",te],["__scopeId","data-v-9f3a2a54"]]);var ie=ae;const ne={key:0,class:"container"},oe={ref:"remoteVideo",autoplay:"",playsinline:"",muted:"",class:"remote-video"},re={ref:"localVideo",autoplay:"",playsinline:"",muted:"",class:"local-video"},ce={class:"controls d-flex justify-content-center gap-3 mt-3"};function le(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[n.user?((0,i.uX)(),(0,i.CE)("div",ne,[(0,i.Lk)("video",oe,null,512),(0,i.Lk)("video",re,null,512),(0,i.Lk)("div",ce,[(0,i.Lk)("button",{class:"btn btn-danger d-flex align-items-center btn-sm gap-2",onClick:t[0]||(t[0]=(...e)=>o.endCall&&o.endCall(...e))},t[2]||(t[2]=[(0,i.Lk)("i",{class:"bi bi-telephone"},null,-1),(0,i.eW)(" End ")]))])])):((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously "))])}s(7588);var de={data(){return{pc:null,localStream:null,remoteStream:null,callDocId:"video-call-room",remoteDescriptionSet:!1,pendingCandidates:[],user:null}},methods:{async signInAnonymously(){try{this.$router.push("/")}catch(e){console.error("Anonymous login error:",e)}},async endCall(){try{this.localStream&&(this.localStream.getTracks().forEach((e=>e.stop())),this.localStream=null),this.pc&&(this.pc.close(),this.pc=null),this.$refs.remoteVideo&&(this.$refs.remoteVideo.srcObject=null),this.$refs.localVideo&&(this.$refs.localVideo.srcObject=null);const e=(0,l.H9)(m,"calls",this.callDocId);await(0,l.kd)(e),this.$router.go(-1),console.log("Call ended and document deleted.")}catch(e){console.error("Error ending call:",e)}},async startCall(){const e=this.user.uid,t=this.$route.params.id;this.callDocId=[e,t].sort().join("_"),this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error(r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const s=(0,l.H9)(m,"calls",this.callDocId),a=(0,l.rJ)(s,"offerCandidates"),i=(0,l.rJ)(s,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,l.gS)(a,e.candidate.toJSON())};const n=await this.pc.createOffer();await this.pc.setLocalDescription(n);const o={type:n.type,sdp:n.sdp,sender:e,receiver:t,timestamp:Date.now()};await(0,l.BN)(s,{offer:o}),(0,l.aQ)(s,(e=>{const t=e.data();if(!this.pc.currentRemoteDescription&&t?.answer){const e=new RTCSessionDescription(t.answer);this.pc.setRemoteDescription(e)}})),(0,l.aQ)(i,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());if(this.pc.remoteDescription&&null!==this.pc.remoteDescription.type)await this.pc.addIceCandidate(t);else{const e=setInterval((async()=>{this.pc.remoteDescription&&null!==this.pc.remoteDescription.type&&(await this.pc.addIceCandidate(t),clearInterval(e))}),100)}}}))}))},async answerCall(){this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error(r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const e=(0,l.H9)(m,"calls",this.callDocId),t=(0,l.rJ)(e,"offerCandidates"),s=(0,l.rJ)(e,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,l.gS)(s,e.candidate.toJSON())};const a=await(0,l.x7)(e);if(!a.exists())return void alert("Call not found!");const i=a.data().offer;await this.pc.setRemoteDescription(new RTCSessionDescription(i)),this.remoteDescriptionSet=!0;const n=await this.pc.createAnswer();await this.pc.setLocalDescription(n);const o={type:n.type,sdp:n.sdp};await(0,l.BN)(e,{answer:o},{merge:!0}),this.pendingCandidates||(this.pendingCandidates=[]),(0,l.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());this.remoteDescriptionSet?await this.pc.addIceCandidate(t):this.pendingCandidates.push(t)}}))}))}},mounted(){const e=(0,c.xI)();(0,c.hg)(e,(async t=>{if(t)this.user=t,this.startCall();else try{await(0,c.zK)(e),console.log("âœ… Signed in anonymously.")}catch(s){console.error("âŒ Anonymous Sign In Error:",s)}}))}};const ue=(0,g.A)(de,[["render",le]]);var he=ue;const me={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},pe={class:"offcanvas offcanvas-end custom-offcanvas w-50",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},fe={class:"offcanvas-body d-flex flex-column gap-4"},ge={class:"container py-4"},ye={key:0,class:"overflow-hidden bg-dark"},be={class:"list-group list-group-flush"},we=["onClick"],ve=["src"],ke={class:"flex-grow-1"},Le={class:"d-flex justify-content-between align-items-center"},xe={class:"mb-0 fw-semibold text-white"},Ce={key:1,class:"text-center my-auto"};function Se(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",me,[t[5]||(t[5]=(0,i.Lk)("h5",{class:"mb-0 text-white text-center fw-bold flex-grow-1"},"Z CHAT",-1)),t[6]||(t[6]=(0,i.Lk)("div",{class:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-white"})],-1)),(0,i.Lk)("div",pe,[t[4]||(t[4]=(0,i.Lk)("div",{class:"offcanvas-header border-bottom border-secondary"},[(0,i.Lk)("h5",{class:"offcanvas-title text-white",id:"offcanvasRightLabel"},[(0,i.Lk)("i",{class:"bi bi-list me-2"}),(0,i.eW)(" Menu ")]),(0,i.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),(0,i.Lk)("div",fe,[t[3]||(t[3]=(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-info"}),(0,i.Lk)("span",{class:"fw-semibold text-white"},"Profile")],-1)),(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item",onClick:t[0]||(t[0]=e=>o.logout()),style:{cursor:"pointer"}},t[2]||(t[2]=[(0,i.Lk)("i",{class:"bi bi-box-arrow-right fs-4 text-danger"},null,-1),(0,i.Lk)("span",{class:"fw-semibold text-danger"},"Logout",-1)]))])])]),(0,i.Lk)("div",ge,[n.user?((0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("div",be,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredContacts,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.uid,onClick:t=>o.startChat(e.uid),class:"list-group-item d-flex align-items-center gap-3 px-4 py-3 contact-item"},[(0,i.Lk)("img",{src:e.avatar||n.defaultAvatar,alt:"Profile",class:"rounded-circle",width:"55",height:"55"},null,8,ve),(0,i.Lk)("div",ke,[(0,i.Lk)("div",Le,[(0,i.Lk)("h6",xe,(0,x.v_)(e.name),1)]),t[7]||(t[7]=(0,i.Lk)("div",{class:"text-white"},"You :Hi",-1))])],8,we)))),128))])])):((0,i.uX)(),(0,i.CE)("div",Ce,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])])}s(2489);var De={name:"contactList",data(){return{contacts:[],user:null,defaultAvatar:"https://static.vecteezy.com/system/resources/previews/032/176/191/non_2x/business-avatar-profile-black-icon-man-of-user-symbol-in-trendy-flat-style-isolated-on-male-profile-people-diverse-face-for-social-network-or-web-vector.jpg"}},computed:{filteredContacts(){return this.user?this.contacts.filter((e=>e.uid!==this.user.uid)):this.contacts}},methods:{async signInAnonymously(){try{const e=await(0,c.zK)(p);this.user=e.user,await this.fetchContacts()}catch(e){Me.push("/"),console.error("Anonymous login error:",e)}},async fetchContacts(){try{const e=await(0,l.GG)((0,l.rJ)(m,"users"));this.contacts=[],e.forEach((e=>{const t=e.data();this.user&&t.uid===this.user.uid||this.contacts.push(t)}))}catch(e){console.error("Error fetching contacts:",e)}},logout(){const e=confirm("Are you sure you want to logout?");e&&(0,c.CI)(p).then((()=>{this.user=null,this.$router.push("/")})).catch((e=>{alert("Logout failed: "+e.message)}))},startChat(e){this.$router.push({name:"chat",params:{id:e}})}},mounted(){(0,c.hg)(p,(e=>{this.user=e,e?this.fetchContacts():this.signInAnonymously()}))}};const Ie=(0,g.A)(De,[["render",Se],["__scopeId","data-v-8dc463ac"]]);var Ae=Ie;const Ee=[{path:"/chat",name:"chat",component:R},{path:"/chat/:id",name:"chat",component:R},{path:"/",name:"login",component:ie},{path:"/vdiocall/:id",name:"vdiocall",component:he},{path:"/contact",name:"contact",component:Ae}],Ue=(0,L.aE)({history:(0,L.Bt)("/zchat/"),routes:Ee});var Me=Ue,Ne=(s(8077),s(7411)),_e=(s(7917),{data(){return{lastMessage:{}}},methods:{async showNotification(e,t={}){if(!("Notification"in window))return void console.warn("âŒ This browser does not support notifications.");const s=await Notification.requestPermission();if("granted"===s){const s=new Notification(e,t);s.onclick=()=>{console.log("Notification clicked!"),t.data?.url&&window.open(t.data.url,"_blank")}}else console.warn("Notification permission not granted!")}}});const $e=(0,a.Ef)(k);$e.use(Me),$e.mixin(_e),$e.use(Ne.Ay),$e.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var d=c(s)}for(t&&t(a);l<o.length;l++)n=o[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkvue_z_chat"]=self["webpackChunkvue_z_chat"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(9509)}));a=s.O(a)})();
//# sourceMappingURL=app.51286d55.js.map