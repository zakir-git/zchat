(function(){"use strict";var e={5972:function(e,t,s){var a=s(5130),i=s(6768);function n(e,t,s,a,n,o){const r=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.Wv)(r)}var o={name:"App"},r=s(1241);const c=(0,r.A)(o,[["render",n]]);var l=c,d=s(1387),u=s(4232);const h={class:"container-fluid p-0"},p={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},m={class:"mb-0 text-white text-center fw-bold flex-grow-1"},f={class:"d-flex gap-4 me-3"},g={class:"row g-0"},b={class:"col-12 col-md-9 d-flex flex-column"},k={key:0,ref:"chatContainer",class:"flex-grow-1 p-3 overflow-auto",style:{height:"88vh"}},y=["href"],w={key:1,class:"text-center my-auto"},v={class:"sticky-bottom border-top bg-dark"},L={key:0,class:"p-3"},x={class:"d-flex align-items-end"};function C(e,t,s,n,o,r){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",p,[(0,i.Lk)("div",{class:"me-2",onClick:t[0]||(t[0]=t=>e.$router.back()),title:"Back"},t[5]||(t[5]=[(0,i.Lk)("i",{class:"bi bi-arrow-left fs-3"},null,-1)])),(0,i.Lk)("h5",m,(0,u.v_)(this.toUser),1),(0,i.Lk)("div",f,[(0,i.bF)(c,{to:"/vdiocall",class:"",onClick:e.startVideoCall,title:"Video Call"},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("i",{class:"bi bi-camera-video-fill text-dark fs-5"},null,-1)]))),_:1,__:[6]},8,["onClick"]),(0,i.bF)(c,{to:"/audiocall",class:"",onClick:e.startAudioCall,title:"Audio Call"},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("i",{class:"bi bi-telephone-fill text-white fs-5"},null,-1)]))),_:1,__:[7]},8,["onClick"])])]),(0,i.Lk)("div",g,[(0,i.Lk)("div",b,[o.user?((0,i.uX)(),(0,i.CE)("div",k,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.messages,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,u.C4)([e.sender===o.user.uid?"text-end":"text-start","mb-2"])},[(0,i.Lk)("span",{class:(0,u.C4)(["p-2 rounded shadow-sm d-inline-block",e.sender===o.user.uid?"bg-primary text-white":"bg-light text-dark"]),style:{"max-width":"70%","word-wrap":"break-word"}},[r.isValidUrl(e.text)?((0,i.uX)(),(0,i.CE)("a",{key:0,href:e.text,target:"_blank",class:"text-decoration-underline"},(0,u.v_)(e.text),9,y)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,u.v_)(e.text),1)],64))],2)],2)))),128))],512)):((0,i.uX)(),(0,i.CE)("div",w,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.signInAnonymously&&r.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])]),(0,i.Lk)("footer",v,[o.user?((0,i.uX)(),(0,i.CE)("div",L,[(0,i.Lk)("div",x,[(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newMessage=e),onKeyup:t[3]||(t[3]=(0,a.jR)((0,a.D$)(((...e)=>r.sendMessage&&r.sendMessage(...e)),["prevent"]),["enter"])),class:"me-2 message-input",placeholder:"Type your message...",rows:"1"},null,544),[[a.Jo,o.newMessage]]),(0,i.Lk)("button",{class:"btn btn-primary send-btn d-flex align-items-center justify-content-center",onClick:t[4]||(t[4]=(...e)=>r.sendMessage&&r.sendMessage(...e))},t[8]||(t[8]=[(0,i.Lk)("i",{class:"bi bi-send fs-5"},null,-1)]))])])):(0,i.Q3)("",!0)])])}s(4114),s(8111),s(1701);var S=s(6400),I=s(7617),A=s(7236);const E={apiKey:"AIzaSyDBRFrzmnXigqP9au3WohG5GvFg7cJd4YI",authDomain:"zchat-f2b41.firebaseapp.com",projectId:"zchat-f2b41",storageBucket:"zchat-f2b41.firebasestorage.app",messagingSenderId:"711186608249",appId:"1:711186608249:web:f53b41a0ae630e952c24a8",measurementId:"G-VXDF17PGNX"},D=(0,S.Wp)(E),U=(0,I.aU)(D),_=(0,A.xI)(D);var M={name:"ChatApp",data(){return{user:{},uid:null,newMessage:"",messages:[],toUid:this.$route.params.id||null,toUser:null}},methods:{async signInAnonymously(){try{const e=await(0,A.zK)(_);this.user=e.user,this.uid=this.user.uid}catch(e){console.error("Anonymous login error:",e),this.$router.push("/")}},async sendMessage(){if(""!==this.newMessage.trim())if(this.user&&this.user.uid)try{await(0,I.gS)((0,I.rJ)(U,"messages"),{text:this.newMessage,sender:this.user.uid,uid:this.user.uid,reciever:this.toUid,createdAt:(0,I.O5)()}),this.newMessage=""}catch(e){alert("Message sending failed: "+e.message)}else alert("User not authenticated!")},async getUserData(e){try{const t=await(0,I.x7)((0,I.H9)(U,"users",e));t.exists()?this.toUser=t.data().name||"Anonymous":console.error("No such user!")}catch(t){console.error("Error fetching user data:",t)}},scrollToBottom(){const e=this.$refs.chatContainer;e&&(e.scrollTop=e.scrollHeight)},isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}},loginStatus(){return new Promise(((e,t)=>{(0,A.hg)(_,(s=>{s?(this.user=s,this.uid=s.uid,e(s)):(this.$router.push("/"),t("No user"))}))}))}},async mounted(){try{const e=await this.loginStatus();await this.getUserData(this.toUid);const t=(0,I.P)((0,I.rJ)(U,"messages"),(0,I.or)((0,I.Uo)((0,I._M)("sender","==",e.uid),(0,I._M)("reciever","==",this.toUid)),(0,I.Uo)((0,I._M)("sender","==",this.toUid),(0,I._M)("reciever","==",e.uid))),(0,I.My)("createdAt"));(0,I.aQ)(t,(async t=>{this.messages=t.docs.map((e=>({...e.data(),id:e.id}))),await(0,i.dY)(),this.scrollToBottom(),this.messages.length>0&&(this.lastMessage=this.messages[this.messages.length-1],this.lastMessage.sender!==e.uid&&this.showNotification("ðŸ”” New Message",{body:`New message: ${this.lastMessage.text}`,icon:"https://cdn-icons-png.flaticon.com/512/190/190411.png",badge:"https://cdn-icons-png.flaticon.com/512/190/190411.png",data:{url:"http://localhost:8080/zchat/#/chat/"+this.toUid}}))}))}catch(e){console.error("Error during mount:",e)}}};const T=(0,r.A)(M,[["render",C],["__scopeId","data-v-09862196"]]);var R=T;const $={class:"d-flex justify-content-center align-items-center vh-100 bg-dark"},j={class:"card shadow-lg rounded-4 text-white px-4 py-5",style:{width:"100%","max-width":"420px","background-color":"#212529"}},O={class:"text-center mb-4"},X={class:"mb-3"},V={class:"input-group"},N={class:"mb-3"},J={class:"input-group"},P={class:"mt-3 text-center"},z={class:"mb-3"},B={class:"input-group"},F={class:"mb-3"},W={class:"input-group"},H={class:"mb-3"},q={class:"input-group"},K={class:"mt-3 text-center"};function G(e,t,s,n,o,r){return(0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("div",j,[(0,i.Lk)("h2",O,(0,u.v_)(o.isLogin?"Login":"Register"),1),o.isLogin?((0,i.uX)(),(0,i.CE)("form",{key:0,onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>r.loginUser&&r.loginUser(...e)),["prevent"]))},[(0,i.Lk)("div",X,[t[10]||(t[10]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",V,[t[9]||(t[9]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",N,[t[12]||(t[12]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",J,[t[11]||(t[11]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[14]||(t[14]=(0,i.Lk)("button",{type:"submit",class:"btn btn-primary w-100 shadow-sm"},"Login",-1)),(0,i.Lk)("p",P,[t[13]||(t[13]=(0,i.eW)(" Don't have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,a.D$)((e=>o.isLogin=!1),["prevent"])),class:"text-info"},"Register here")])],32)):((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>r.registerUser&&r.registerUser(...e)),["prevent"]))},[(0,i.Lk)("div",z,[t[16]||(t[16]=(0,i.Lk)("label",null,"Full Name",-1)),(0,i.Lk)("div",B,[t[15]||(t[15]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-person-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[4]||(t[4]=e=>o.name=e),required:""},null,512),[[a.Jo,o.name]])])]),(0,i.Lk)("div",F,[t[18]||(t[18]=(0,i.Lk)("label",null,"Email",-1)),(0,i.Lk)("div",W,[t[17]||(t[17]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[5]||(t[5]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,i.Lk)("div",H,[t[20]||(t[20]=(0,i.Lk)("label",null,"Password",-1)),(0,i.Lk)("div",q,[t[19]||(t[19]=(0,i.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,i.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[6]||(t[6]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[22]||(t[22]=(0,i.Lk)("button",{type:"submit",class:"btn btn-success w-100 shadow-sm"},"Register",-1)),(0,i.Lk)("p",K,[t[21]||(t[21]=(0,i.eW)(" Already have an account? ")),(0,i.Lk)("a",{href:"#",onClick:t[7]||(t[7]=(0,a.D$)((e=>o.isLogin=!0),["prevent"])),class:"text-info"},"Login here")])],32))])])}var Q={name:"LoginRegister",data(){return{isLogin:!0,email:"",password:"",name:""}},methods:{async loginUser(){try{await(0,A.x9)(_,this.email,this.password),this.$router.push("/contact")}catch(e){alert("Login failed: "+e.message)}},async registerUser(){try{const e=await(0,A.eJ)(_,this.email,this.password),t=e.user;await(0,A.r7)(t,{displayName:this.name}),await(0,I.BN)((0,I.H9)(U,"users",t.uid),{uid:t.uid,name:this.name,email:this.email,createdAt:new Date}),this.isLogin=!0,alert("Registration successful! Please login."),this.name=this.email=this.password=""}catch(e){alert("Registration failed: "+e.message)}}}};const Y=(0,r.A)(Q,[["render",G],["__scopeId","data-v-9f3a2a54"]]);var Z=Y;const ee={key:0,class:"container"},te={ref:"remoteVideo",autoplay:"",playsinline:"",muted:"",class:"remote-video"},se={ref:"localVideo",autoplay:"",playsinline:"",muted:"",class:"local-video"},ae={class:"controls d-flex justify-content-center gap-3 mt-3"};function ie(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[n.user?((0,i.uX)(),(0,i.CE)("div",ee,[(0,i.Lk)("video",te,null,512),(0,i.Lk)("video",se,null,512),(0,i.Lk)("div",ae,[(0,i.Lk)("button",{class:"btn btn-outline-info d-flex align-items-center btn-sm gap-2",onClick:t[0]||(t[0]=(...e)=>o.startCall&&o.startCall(...e))},t[4]||(t[4]=[(0,i.Lk)("i",{class:"bi bi-telephone"},null,-1),(0,i.eW)(" Call ")])),(0,i.Lk)("button",{class:"btn btn-success d-flex align-items-center btn-sm gap-2",onClick:t[1]||(t[1]=(...e)=>o.answerCall&&o.answerCall(...e))},t[5]||(t[5]=[(0,i.Lk)("i",{class:"bi bi-check-circle"},null,-1),(0,i.eW)(" Recive ")])),(0,i.Lk)("button",{class:"btn btn-danger d-flex align-items-center btn-sm gap-2",onClick:t[2]||(t[2]=(...e)=>o.endCall&&o.endCall(...e))},t[6]||(t[6]=[(0,i.Lk)("i",{class:"bi bi-telephone"},null,-1),(0,i.eW)(" End ")]))])])):((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[3]||(t[3]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously "))])}s(7588);var ne={data(){return{pc:null,localStream:null,remoteStream:null,callDocId:"video-call-room",remoteDescriptionSet:!1,pendingCandidates:[],user:null}},methods:{async signInAnonymously(){try{this.$router.push("/")}catch(e){console.error("Anonymous login error:",e)}},async endCall(){try{this.localStream&&(this.localStream.getTracks().forEach((e=>e.stop())),this.localStream=null),this.pc&&(this.pc.close(),this.pc=null),this.$refs.remoteVideo&&(this.$refs.remoteVideo.srcObject=null),this.$refs.localVideo&&(this.$refs.localVideo.srcObject=null);const e=(0,I.H9)(U,"calls",this.callDocId);await(0,I.BN)(e,{}),this.$router.push("/chat"),console.log("Call ended.")}catch(e){console.error("Error ending call:",e)}},async startCall(){this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(n){return alert("Cannot access camera and microphone: "+n.message),void console.error(n)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const e=(0,I.H9)(U,"calls",this.callDocId),t=(0,I.rJ)(e,"offerCandidates"),s=(0,I.rJ)(e,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,I.gS)(t,e.candidate.toJSON())};const a=await this.pc.createOffer();await this.pc.setLocalDescription(a);const i={type:a.type,sdp:a.sdp};await(0,I.BN)(e,{offer:i}),(0,I.aQ)(e,(e=>{const t=e.data();if(!this.pc.currentRemoteDescription&&t?.answer){const e=new RTCSessionDescription(t.answer);this.pc.setRemoteDescription(e)}})),(0,I.aQ)(s,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());if(this.pc.remoteDescription&&null!==this.pc.remoteDescription.type)await this.pc.addIceCandidate(t);else{const e=setInterval((async()=>{this.pc.remoteDescription&&null!==this.pc.remoteDescription.type&&(await this.pc.addIceCandidate(t),clearInterval(e))}),100)}}}))}))},async answerCall(){this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error(r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const e=(0,I.H9)(U,"calls",this.callDocId),t=(0,I.rJ)(e,"offerCandidates"),s=(0,I.rJ)(e,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,I.gS)(s,e.candidate.toJSON())};const a=await(0,I.x7)(e);if(!a.exists())return void alert("Call not found!");const i=a.data().offer;await this.pc.setRemoteDescription(new RTCSessionDescription(i)),this.remoteDescriptionSet=!0;const n=await this.pc.createAnswer();await this.pc.setLocalDescription(n);const o={type:n.type,sdp:n.sdp};await(0,I.BN)(e,{answer:o},{merge:!0});for(const c of this.pendingCandidates)await this.pc.addIceCandidate(c);this.pendingCandidates=[],(0,I.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());this.remoteDescriptionSet?await this.pc.addIceCandidate(t):this.pendingCandidates.push(t)}}))}))}},mounted(){const e=(0,A.xI)();this.user=e.currentUser,this.startCall(),this.user||this.signInAnonymously();const t=(0,I.H9)(U,"calls",this.callDocId);(0,I.aQ)(t,(e=>{if(e.exists()){const t=e.data();t.offer&&!this.remoteDescriptionSet&&(alert("ðŸ“ž Incoming call..."),console.log("Incoming call detected:",t.offer))}}))}};const oe=(0,r.A)(ne,[["render",ie]]);var re=oe;const ce={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},le={class:"offcanvas offcanvas-end custom-offcanvas w-50",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},de={class:"offcanvas-body d-flex flex-column gap-4"},ue={class:"container py-4"},he={key:0,class:"overflow-hidden bg-dark"},pe={class:"list-group list-group-flush"},me=["onClick"],fe=["src"],ge={class:"flex-grow-1"},be={class:"d-flex justify-content-between align-items-center"},ke={class:"mb-0 fw-semibold text-white"},ye={key:1,class:"text-center my-auto"};function we(e,t,s,a,n,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",ce,[t[5]||(t[5]=(0,i.Lk)("h5",{class:"mb-0 text-white text-center fw-bold flex-grow-1"},"Z CHAT",-1)),t[6]||(t[6]=(0,i.Lk)("div",{class:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-white"})],-1)),(0,i.Lk)("div",le,[t[4]||(t[4]=(0,i.Lk)("div",{class:"offcanvas-header border-bottom border-secondary"},[(0,i.Lk)("h5",{class:"offcanvas-title text-white",id:"offcanvasRightLabel"},[(0,i.Lk)("i",{class:"bi bi-list me-2"}),(0,i.eW)(" Menu ")]),(0,i.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),(0,i.Lk)("div",de,[t[3]||(t[3]=(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item"},[(0,i.Lk)("i",{class:"bi bi-person-circle fs-4 text-info"}),(0,i.Lk)("span",{class:"fw-semibold text-white"},"Profile")],-1)),(0,i.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item",onClick:t[0]||(t[0]=e=>o.logout()),style:{cursor:"pointer"}},t[2]||(t[2]=[(0,i.Lk)("i",{class:"bi bi-box-arrow-right fs-4 text-danger"},null,-1),(0,i.Lk)("span",{class:"fw-semibold text-danger"},"Logout",-1)]))])])]),(0,i.Lk)("div",ue,[n.user?((0,i.uX)(),(0,i.CE)("div",he,[(0,i.Lk)("div",pe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredContacts,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.uid,onClick:t=>o.startChat(e.uid),class:"list-group-item d-flex align-items-center gap-3 px-4 py-3 contact-item"},[(0,i.Lk)("img",{src:e.avatar||n.defaultAvatar,alt:"Profile",class:"rounded-circle",width:"55",height:"55"},null,8,fe),(0,i.Lk)("div",ge,[(0,i.Lk)("div",be,[(0,i.Lk)("h6",ke,(0,u.v_)(e.name),1)]),t[7]||(t[7]=(0,i.Lk)("div",{class:"text-white"},"You :Hi",-1))])],8,me)))),128))])])):((0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])])}s(2489);var ve={name:"contactList",data(){return{contacts:[],user:null,defaultAvatar:"https://static.vecteezy.com/system/resources/previews/032/176/191/non_2x/business-avatar-profile-black-icon-man-of-user-symbol-in-trendy-flat-style-isolated-on-male-profile-people-diverse-face-for-social-network-or-web-vector.jpg"}},computed:{filteredContacts(){return this.user?this.contacts.filter((e=>e.uid!==this.user.uid)):this.contacts}},methods:{async signInAnonymously(){try{const e=await(0,A.zK)(_);this.user=e.user,await this.fetchContacts()}catch(e){Ie.push("/"),console.error("Anonymous login error:",e)}},async fetchContacts(){try{const e=await(0,I.GG)((0,I.rJ)(U,"users"));this.contacts=[],e.forEach((e=>{const t=e.data();this.user&&t.uid===this.user.uid||this.contacts.push(t)}))}catch(e){console.error("Error fetching contacts:",e)}},logout(){const e=confirm("Are you sure you want to logout?");e&&(0,A.CI)(_).then((()=>{this.user=null,this.$router.push("/")})).catch((e=>{alert("Logout failed: "+e.message)}))},startChat(e){this.$router.push({name:"chat",params:{id:e}})}},mounted(){(0,A.hg)(_,(e=>{this.user=e,e?this.fetchContacts():this.signInAnonymously()}))}};const Le=(0,r.A)(ve,[["render",we],["__scopeId","data-v-8dc463ac"]]);var xe=Le;const Ce=[{path:"/chat",name:"chat",component:R},{path:"/chat/:id",name:"chat",component:R},{path:"/",name:"login",component:Z},{path:"/vdiocall",name:"vdiocall",component:re},{path:"/contact",name:"contact",component:xe}],Se=(0,d.aE)({history:(0,d.Bt)("/zchat/"),routes:Ce});var Ie=Se,Ae=(s(8077),s(7411)),Ee=(s(7917),{data(){return{lastMessage:{}}},methods:{async showNotification(e,t={}){if(!("Notification"in window))return void console.warn("âŒ This browser does not support notifications.");if(!document.hidden)return;const s=await Notification.requestPermission();if("granted"===s){const s=new Notification(e,t);s.onclick=()=>{console.log("Notification clicked!"),t.data?.url&&window.open(t.data.url,"_blank")}}else console.warn("Notification permission not granted!")}}});const De=(0,a.Ef)(l);De.use(Ie),De.mixin(Ee),De.use(Ae.Ay),De.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var d=c(s)}for(t&&t(a);l<o.length;l++)n=o[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkvue_z_chat"]=self["webpackChunkvue_z_chat"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5972)}));a=s.O(a)})();
//# sourceMappingURL=app.48951f5b.js.map