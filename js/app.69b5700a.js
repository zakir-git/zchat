(function(){"use strict";var e={972:function(e,t,n){var s=n(5130),r=n(6768);function o(e,t,n,s,o,a){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(i)}var a={name:"App"},i=n(1241);const l=(0,i.A)(a,[["render",o]]);var u=l,c=n(1387),d=n(4232);const g={class:"container-fluid p-0"},p={class:"row g-0"},f={class:"col-12 col-md-9 d-flex flex-column"},h={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},m={key:0,class:"dropdown"},b={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"userMenuButton"},y={key:0,ref:"chatContainer",class:"flex-grow-1 p-3 overflow-auto",style:{height:"88vh"}},v=["href"],w={key:1,class:"text-center my-auto"},k={class:"sticky-bottom border-top bg-dark"},x={key:0,class:"p-3"},L={class:"d-flex align-items-end"};function C(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",p,[(0,r.Lk)("div",f,[(0,r.Lk)("div",h,[t[7]||(t[7]=(0,r.Lk)("h5",{class:"mb-0 text-white text-center fw-bold flex-grow-1"},"Z CHAT",-1)),a.user?((0,r.uX)(),(0,r.CE)("div",m,[t[6]||(t[6]=(0,r.Lk)("button",{class:"btn btn-primary dropdown-toggle d-flex align-items-center justify-content-center border-0",type:"button",id:"userMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r.Lk)("i",{class:"bi bi-person-circle fs-4 text-white"})],-1)),(0,r.Lk)("ul",b,[(0,r.Lk)("li",null,[(0,r.Lk)("button",{class:"dropdown-item text-danger",onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e))},t[5]||(t[5]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-right me-2"},null,-1),(0,r.eW)(" Logout ")]))])])])):(0,r.Q3)("",!0)]),a.user?((0,r.uX)(),(0,r.CE)("div",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.messages,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,d.C4)([e.sender===a.user.uid?"text-end":"text-start","mb-2"])},[(0,r.Lk)("span",{class:(0,d.C4)(["p-2 rounded shadow-sm d-inline-block",e.sender===a.user.uid?"bg-primary text-white":"bg-light text-dark"]),style:{"max-width":"70%","word-wrap":"break-word"}},[i.isValidUrl(e.text)?((0,r.uX)(),(0,r.CE)("a",{key:0,href:e.text,target:"_blank",class:"text-decoration-underline"},(0,d.v_)(e.text),9,v)):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.eW)((0,d.v_)(e.text),1)],64))],2)],2)))),128))],512)):((0,r.uX)(),(0,r.CE)("div",w,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.signInAnonymously&&i.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])]),(0,r.Lk)("footer",k,[a.user?((0,r.uX)(),(0,r.CE)("div",x,[(0,r.Lk)("div",L,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.newMessage=e),onKeyup:t[3]||(t[3]=(0,s.jR)((0,s.D$)(((...e)=>i.sendMessage&&i.sendMessage(...e)),["prevent"]),["enter"])),class:"me-2 message-input",placeholder:"Type your message...",rows:"1"},null,544),[[s.Jo,a.newMessage]]),(0,r.Lk)("button",{class:"btn btn-primary send-btn d-flex align-items-center justify-content-center",onClick:t[4]||(t[4]=(...e)=>i.sendMessage&&i.sendMessage(...e))},t[8]||(t[8]=[(0,r.Lk)("i",{class:"bi bi-send fs-5"},null,-1)]))])])):(0,r.Q3)("",!0)])])}n(4114),n(8111),n(1701);var M=n(6400),A=n(7617),_=n(7236);const j={apiKey:"AIzaSyCaKKSo3SZQnJdbrMDnv20icp6n1w-T1HM",authDomain:"vdiocalling-79149.firebaseapp.com",projectId:"vdiocalling-79149",storageBucket:"vdiocalling-79149.appspot.com",messagingSenderId:"1066146546644",appId:"1:1066146546644:web:7d4ec99937a40060cccc41"},E=(0,M.Wp)(j),O=(0,A.aU)(E),I=(0,_.xI)(E);var S={name:"ChatApp",data(){return{user:null,newMessage:"",messages:[]}},methods:{async signInAnonymously(){try{this.$router.push("/");const e=await(0,_.zK)(I);this.user=e.user}catch(e){console.error("Anonymous login error:",e)}},async sendMessage(){if(""!==this.newMessage.trim())if(this.user&&this.user.uid)try{await(0,A.gS)((0,A.rJ)(O,"messages"),{text:this.newMessage,sender:this.user.uid,uid:this.user.uid,createdAt:(0,A.O5)()}),this.newMessage=""}catch(e){alert("Message sending failed: "+e.message)}else alert("User not authenticated!")},logout(){const e=confirm("Are you sure you want to logout?");e&&(0,_.CI)(I).then((()=>{this.user=null,this.$router.push("/")})).catch((e=>{alert("Logout failed: "+e.message)}))},scrollToBottom(){const e=this.$refs.chatContainer;e&&(e.scrollTop=e.scrollHeight)},isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}}},mounted(){(0,_.hg)(I,(e=>{this.user=e}));const e=(0,A.P)((0,A.rJ)(O,"messages"),(0,A.My)("createdAt"));(0,A.aQ)(e,(async e=>{this.messages=e.docs.map((e=>({...e.data(),id:e.id}))),await(0,r.dY)(),this.scrollToBottom()}))}};const U=(0,i.A)(S,[["render",C],["__scopeId","data-v-1153603a"]]);var X=U;const T={class:"d-flex justify-content-center align-items-center vh-100 bg-dark"},K={class:"card p-4 shadow text-white",style:{width:"100%","max-width":"400px","background-color":"#343a40"}},P={class:"mb-3"},B={class:"mb-3"};function J(e,t,n,o,a,i){return(0,r.uX)(),(0,r.CE)("div",T,[(0,r.Lk)("div",K,[t[6]||(t[6]=(0,r.Lk)("h3",{class:"text-center mb-4"},"Login",-1)),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.loginUser&&i.loginUser(...e)),["prevent"]))},[(0,r.Lk)("div",P,[t[3]||(t[3]=(0,r.Lk)("label",null,"Email",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",class:"form-control bg-dark text-white","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),required:""},null,512),[[s.Jo,a.email]])]),(0,r.Lk)("div",B,[t[4]||(t[4]=(0,r.Lk)("label",null,"Password",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",class:"form-control bg-dark text-white","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),required:""},null,512),[[s.Jo,a.password]])]),t[5]||(t[5]=(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100"},"Login",-1))],32)])])}var $={name:"LoginPage",data(){return{email:"",password:"",errorMsg:""}},methods:{async loginUser(){try{await(0,_.x9)(I,this.email,this.password),this.$router.push("/chat")}catch(e){alert("Login failed: "+e.message),this.errorMsg=e.message,console.error("Login error:",e)}}}};const z=(0,i.A)($,[["render",J],["__scopeId","data-v-055b26d0"]]);var V=z;const D=[{path:"/chat",name:"chat",component:X},{path:"/",name:"login",component:V}],Q=(0,c.aE)({history:(0,c.Bt)("/zchat/"),routes:D});var W=Q;n(8077);const F=(0,s.Ef)(u);F.use(W),F.mount("#app")}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,s,r,o){if(!s){var a=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],o=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||a>=o)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,r,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,a=s[0],i=s[1],l=s[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var c=l(n)}for(t&&t(s);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},s=self["webpackChunkvue_z_chat"]=self["webpackChunkvue_z_chat"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(972)}));s=n.O(s)})();
//# sourceMappingURL=app.69b5700a.js.map