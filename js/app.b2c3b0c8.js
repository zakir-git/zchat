(function(){var e={2615:function(){},5388:function(e,t,s){"use strict";var a=s(5130),n=s(6768);function i(e,t,s,a,i,o){const r=(0,n.g2)("router-view"),c=(0,n.g2)("CallListener");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(r),(0,n.bF)(c)])}const o={style:{display:"none"}};function r(e,t,s,a,i,r){return(0,n.uX)(),(0,n.CE)("div",o)}var c=s(2615),l=s.n(c),d=s(1241);const u=(0,d.A)(l(),[["render",r]]);var h=u,p={name:"App",components:{CallListener:h}};const m=(0,d.A)(p,[["render",i]]);var f=m,g=s(1387),y=s(4232);const b={class:"container-fluid p-0"},w={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},k={class:"mb-0 text-white text-center fw-bold flex-grow-1"},v={class:"d-flex gap-4 me-3"},L={class:"row g-0"},x={class:"col-12 col-md-9 d-flex flex-column"},C={key:0,ref:"chatContainer",class:"flex-grow-1 p-3 overflow-auto",style:{height:"88vh"}},E=["href"],S={key:1,class:"text-center my-auto"},A={class:"sticky-bottom border-top bg-dark"},I={key:0,class:"p-3"},D={class:"d-flex align-items-end"};function U(e,t,s,i,o,r){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",w,[(0,n.bF)(c,{class:"me-2",to:"/contact"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.Lk)("i",{class:"bi bi-arrow-left fs-3"},null,-1)]))),_:1,__:[6]}),(0,n.Lk)("h5",k,(0,y.v_)(this.toUser),1),(0,n.Lk)("div",v,[(0,n.Lk)("div",{class:"",onClick:t[0]||(t[0]=e=>r.startVideoCall())},t[7]||(t[7]=[(0,n.Lk)("i",{class:"bi bi-camera-video-fill text-dark fs-5"},null,-1)])),(0,n.Lk)("div",{class:"",onClick:t[1]||(t[1]=(...t)=>e.startAudioCall&&e.startAudioCall(...t)),title:"Audio Call"},t[8]||(t[8]=[(0,n.Lk)("i",{class:"bi bi-telephone-fill text-white fs-5"},null,-1)]))])]),(0,n.Lk)("div",L,[(0,n.Lk)("div",x,[o.user?((0,n.uX)(),(0,n.CE)("div",C,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.messages,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:(0,y.C4)([e.sender===o.user.uid?"text-end":"text-start","mb-2"])},[(0,n.Lk)("span",{class:(0,y.C4)(["p-2 rounded shadow-sm d-inline-block",e.sender===o.user.uid?"bg-primary text-white":"bg-light text-dark"]),style:{"max-width":"70%","word-wrap":"break-word"}},[r.isValidUrl(e.text)?((0,n.uX)(),(0,n.CE)("a",{key:0,href:e.text,target:"_blank",class:"text-decoration-underline"},(0,y.v_)(e.text),9,E)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.eW)((0,y.v_)(e.text),1)],64))],2)],2)))),128))],512)):((0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.signInAnonymously&&r.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])]),(0,n.Lk)("footer",A,[o.user?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",D,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newMessage=e),onKeyup:t[4]||(t[4]=(0,a.jR)((0,a.D$)(((...e)=>r.sendMessage&&r.sendMessage(...e)),["prevent"]),["enter"])),class:"me-2 message-input",placeholder:"Type your message...",rows:"1"},null,544),[[a.Jo,o.newMessage]]),(0,n.Lk)("button",{class:"btn btn-primary send-btn d-flex align-items-center justify-content-center",onClick:t[5]||(t[5]=(...e)=>r.sendMessage&&r.sendMessage(...e))},t[9]||(t[9]=[(0,n.Lk)("i",{class:"bi bi-send fs-5"},null,-1)]))])])):(0,n.Q3)("",!0)])])}s(4114),s(8111),s(1701);var M=s(6400),_=s(7617),T=s(7236);const $={apiKey:"AIzaSyDBRFrzmnXigqP9au3WohG5GvFg7cJd4YI",authDomain:"zchat-f2b41.firebaseapp.com",projectId:"zchat-f2b41",storageBucket:"zchat-f2b41.firebasestorage.app",messagingSenderId:"711186608249",appId:"1:711186608249:web:f53b41a0ae630e952c24a8",measurementId:"G-VXDF17PGNX"},j=(0,M.Wp)($),X=(0,_.aU)(j),O=(0,T.xI)(j);var R={name:"ChatApp",data(){return{user:{},uid:null,newMessage:"",messages:[],toUid:this.$route.params.id||null,toUser:null}},methods:{async signInAnonymously(){try{const e=await(0,T.zK)(O);this.user=e.user,this.uid=this.user.uid}catch(e){console.error("Anonymous login error:",e),this.$router.push("/")}},async sendMessage(){if(""!==this.newMessage.trim())if(this.user&&this.user.uid)try{await(0,_.gS)((0,_.rJ)(X,"messages"),{text:this.newMessage,sender:this.user.uid,uid:this.user.uid,reciever:this.toUid,createdAt:(0,_.O5)()}),this.newMessage=""}catch(e){alert("Message sending failed: "+e.message)}else alert("User not authenticated!")},async getUserData(e){try{const t=await(0,_.x7)((0,_.H9)(X,"users",e));t.exists()?this.toUser=t.data().name||"Anonymous":console.error("No such user!")}catch(t){console.error("Error fetching user data:",t)}},scrollToBottom(){const e=this.$refs.chatContainer;e&&(e.scrollTop=e.scrollHeight)},isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}},loginStatus(){return new Promise(((e,t)=>{(0,T.hg)(O,(s=>{s?(this.user=s,this.uid=s.uid,e(s)):(this.$router.push("/"),t("No user"))}))}))},startVideoCall(){this.$router.push({name:"vdiocall",params:{id:this.toUid}})}},async mounted(){try{const e=await this.loginStatus();await this.getUserData(this.toUid);const t=(0,_.P)((0,_.rJ)(X,"messages"),(0,_.or)((0,_.Uo)((0,_._M)("sender","==",e.uid),(0,_._M)("reciever","==",this.toUid)),(0,_.Uo)((0,_._M)("sender","==",this.toUid),(0,_._M)("reciever","==",e.uid))),(0,_.My)("createdAt"));(0,_.aQ)(t,(async t=>{this.messages=t.docs.map((e=>({...e.data(),id:e.id}))),await(0,n.dY)(),this.scrollToBottom(),this.messages.length>0&&(this.lastMessage=this.messages[this.messages.length-1],this.lastMessage.sender!==e.uid&&this.showNotification("ðŸ”” New Message",{body:`New message: ${this.lastMessage.text}`,icon:"https://cdn-icons-png.flaticon.com/512/190/190411.png",badge:"https://cdn-icons-png.flaticon.com/512/190/190411.png",data:{url:"http://localhost:8080/zchat/#/chat/"+this.toUid}}))}))}catch(e){console.error("Error during mount:",e)}}};const N=(0,d.A)(R,[["render",U],["__scopeId","data-v-627b333d"]]);var V=N;const J={class:"d-flex justify-content-center align-items-center vh-100 bg-dark"},P={class:"card shadow-lg rounded-4 text-white px-4 py-5",style:{width:"100%","max-width":"420px","background-color":"#212529"}},z={class:"text-center mb-4"},F={class:"mb-3"},B={class:"input-group"},H={class:"mb-3"},K={class:"input-group"},q={class:"mt-3 text-center"},W={class:"mb-3"},G={class:"input-group"},Q={class:"mb-3"},Y={class:"input-group"},Z={class:"mb-3"},ee={class:"input-group"},te={class:"mt-3 text-center"};function se(e,t,s,i,o,r){return(0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("div",P,[(0,n.Lk)("h2",z,(0,y.v_)(o.isLogin?"Login":"Register"),1),o.isLogin?((0,n.uX)(),(0,n.CE)("form",{key:0,onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>r.loginUser&&r.loginUser(...e)),["prevent"]))},[(0,n.Lk)("div",F,[t[10]||(t[10]=(0,n.Lk)("label",null,"Email",-1)),(0,n.Lk)("div",B,[t[9]||(t[9]=(0,n.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,n.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,n.Lk)("div",H,[t[12]||(t[12]=(0,n.Lk)("label",null,"Password",-1)),(0,n.Lk)("div",K,[t[11]||(t[11]=(0,n.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,n.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[14]||(t[14]=(0,n.Lk)("button",{type:"submit",class:"btn btn-primary w-100 shadow-sm"},"Login",-1)),(0,n.Lk)("p",q,[t[13]||(t[13]=(0,n.eW)(" Don't have an account? ")),(0,n.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,a.D$)((e=>o.isLogin=!1),["prevent"])),class:"text-info"},"Register here")])],32)):((0,n.uX)(),(0,n.CE)("form",{key:1,onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>r.registerUser&&r.registerUser(...e)),["prevent"]))},[(0,n.Lk)("div",W,[t[16]||(t[16]=(0,n.Lk)("label",null,"Full Name",-1)),(0,n.Lk)("div",G,[t[15]||(t[15]=(0,n.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,n.Lk)("i",{class:"bi bi-person-fill"})],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[4]||(t[4]=e=>o.name=e),required:""},null,512),[[a.Jo,o.name]])])]),(0,n.Lk)("div",Q,[t[18]||(t[18]=(0,n.Lk)("label",null,"Email",-1)),(0,n.Lk)("div",Y,[t[17]||(t[17]=(0,n.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,n.Lk)("i",{class:"bi bi-envelope-fill"})],-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[5]||(t[5]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]])])]),(0,n.Lk)("div",Z,[t[20]||(t[20]=(0,n.Lk)("label",null,"Password",-1)),(0,n.Lk)("div",ee,[t[19]||(t[19]=(0,n.Lk)("span",{class:"input-group-text bg-secondary text-white"},[(0,n.Lk)("i",{class:"bi bi-lock-fill"})],-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",class:"form-control bg-dark text-white shadow-sm","onUpdate:modelValue":t[6]||(t[6]=e=>o.password=e),required:""},null,512),[[a.Jo,o.password]])])]),t[22]||(t[22]=(0,n.Lk)("button",{type:"submit",class:"btn btn-success w-100 shadow-sm"},"Register",-1)),(0,n.Lk)("p",te,[t[21]||(t[21]=(0,n.eW)(" Already have an account? ")),(0,n.Lk)("a",{href:"#",onClick:t[7]||(t[7]=(0,a.D$)((e=>o.isLogin=!0),["prevent"])),class:"text-info"},"Login here")])],32))])])}var ae={name:"LoginRegister",data(){return{isLogin:!0,email:"",password:"",name:""}},methods:{async loginUser(){try{await(0,T.x9)(O,this.email,this.password),this.$router.push("/contact")}catch(e){alert("Login failed: "+e.message)}},async registerUser(){try{const e=await(0,T.eJ)(O,this.email,this.password),t=e.user;await(0,T.r7)(t,{displayName:this.name}),await(0,_.BN)((0,_.H9)(X,"users",t.uid),{uid:t.uid,name:this.name,email:this.email,createdAt:new Date}),this.isLogin=!0,alert("Registration successful! Please login."),this.name=this.email=this.password=""}catch(e){alert("Registration failed: "+e.message)}}}};const ne=(0,d.A)(ae,[["render",se],["__scopeId","data-v-9f3a2a54"]]);var ie=ne;const oe={key:0,class:"container"},re={ref:"remoteVideo",autoplay:"",playsinline:"",muted:"",class:"remote-video"},ce={ref:"localVideo",autoplay:"",playsinline:"",muted:"",class:"local-video"},le={class:"controls d-flex justify-content-center gap-3 mt-3"};function de(e,t,s,a,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[i.user?((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.Lk)("video",re,null,512),(0,n.Lk)("video",ce,null,512),(0,n.Lk)("div",le,[(0,n.Lk)("button",{class:"btn btn-danger d-flex align-items-center btn-sm gap-2",onClick:t[0]||(t[0]=(...e)=>o.endCall&&o.endCall(...e))},t[2]||(t[2]=[(0,n.Lk)("i",{class:"bi bi-telephone"},null,-1),(0,n.eW)(" End ")]))])])):((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously "))])}s(7588);var ue={data(){return{pc:null,localStream:null,remoteStream:null,remoteDescriptionSet:!1,pendingCandidates:[],user:null,callDocId:null}},methods:{async signInAnonymously(){try{this.$router.push("/")}catch(e){console.error("Anonymous login error:",e)}},async endCall(){try{if(this.localStream&&(this.localStream.getTracks().forEach((e=>e.stop())),this.localStream=null),this.pc&&(this.pc.close(),this.pc=null),this.$refs.remoteVideo&&(this.$refs.remoteVideo.srcObject=null),this.$refs.localVideo&&(this.$refs.localVideo.srcObject=null),this.callDocId){const e=(0,_.H9)(X,"calls",this.callDocId);await(0,_.kd)(e),console.log("ðŸ“‚ Firestore call document deleted.")}else console.warn("âš ï¸ No callDocId found. Skipping Firestore delete.");this.$router.go(-1),console.log("ðŸ“ž Call ended successfully.")}catch(e){console.error("âŒ Error ending call:",e)}},async startCall(){const e=this.user.uid,t=this.$route.params.id;this.callDocId=[e,t].sort().join("_"),this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error("Media Error:",r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const s=(0,_.H9)(X,"calls",this.callDocId);await(0,_.BN)(s,{sender:e,receiver:t,createdAt:Date.now()});const a=(0,_.rJ)(s,"offerCandidates"),n=(0,_.rJ)(s,"answerCandidates");this.pc.onicecandidate=async e=>{if(e.candidate)try{await(0,_.gS)(a,e.candidate.toJSON())}catch(r){console.error("Error adding ICE candidate: ",r)}};const i=await this.pc.createOffer();await this.pc.setLocalDescription(i);const o={type:i.type,sdp:i.sdp};await(0,_.BN)(s,{offer:o},{merge:!0}),(0,_.aQ)(s,(e=>{const t=e.data();if(t?.answer&&!this.pc.currentRemoteDescription){const e=new RTCSessionDescription(t.answer);this.pc.setRemoteDescription(e)}})),(0,_.aQ)(n,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());try{if(this.pc.remoteDescription&&null!==this.pc.remoteDescription.type)await this.pc.addIceCandidate(t);else{const e=setInterval((async()=>{this.pc.remoteDescription&&null!==this.pc.remoteDescription.type&&(await this.pc.addIceCandidate(t),clearInterval(e))}),100)}}catch(r){console.error("Error adding remote ICE candidate:",r)}}}))}))},async answerCall(){this.pc=new RTCPeerConnection;try{this.localStream=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),this.$refs.localVideo.srcObject=this.localStream}catch(r){return alert("Cannot access camera and microphone: "+r.message),void console.error(r)}this.remoteStream=new MediaStream,this.$refs.remoteVideo.srcObject=this.remoteStream,this.localStream.getTracks().forEach((e=>{this.pc.addTrack(e,this.localStream)})),this.pc.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{this.remoteStream.addTrack(e)}))};const e=(0,_.H9)(X,"calls",this.callDocId),t=(0,_.rJ)(e,"offerCandidates"),s=(0,_.rJ)(e,"answerCandidates");this.pc.onicecandidate=async e=>{e.candidate&&await(0,_.gS)(s,e.candidate.toJSON())};const a=await(0,_.x7)(e);if(!a.exists())return void alert("Call not found!");const n=a.data().offer;await this.pc.setRemoteDescription(new RTCSessionDescription(n)),this.remoteDescriptionSet=!0;const i=await this.pc.createAnswer();await this.pc.setLocalDescription(i);const o={type:i.type,sdp:i.sdp};await(0,_.BN)(e,{answer:o},{merge:!0}),this.pendingCandidates||(this.pendingCandidates=[]),(0,_.aQ)(t,(e=>{e.docChanges().forEach((async e=>{if("added"===e.type){const t=new RTCIceCandidate(e.doc.data());this.remoteDescriptionSet?await this.pc.addIceCandidate(t):this.pendingCandidates.push(t)}}))}))}},mounted(){const e=(0,T.xI)();(0,T.hg)(e,(async t=>{if(t)this.user=t,this.startCall();else try{await(0,T.zK)(e),console.log("âœ… Signed in anonymously.")}catch(s){console.error("âŒ Anonymous Sign In Error:",s)}}))}};const he=(0,d.A)(ue,[["render",de]]);var pe=he;const me={class:"bg-primary py-1 px-2 shadow-sm d-flex sticky-top justify-content-between align-items-center"},fe={class:"offcanvas offcanvas-end custom-offcanvas w-50",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},ge={class:"offcanvas-body d-flex flex-column gap-4"},ye={class:"container py-4"},be={key:0,class:"overflow-hidden bg-dark"},we={class:"list-group list-group-flush"},ke=["onClick"],ve=["src"],Le={class:"flex-grow-1"},xe={class:"d-flex justify-content-between align-items-center"},Ce={class:"mb-0 fw-semibold text-white"},Ee={key:1,class:"text-center my-auto"};function Se(e,t,s,a,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",me,[t[5]||(t[5]=(0,n.Lk)("h5",{class:"mb-0 text-white text-center fw-bold flex-grow-1"},"Z CHAT",-1)),t[6]||(t[6]=(0,n.Lk)("div",{class:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},[(0,n.Lk)("i",{class:"bi bi-person-circle fs-4 text-white"})],-1)),(0,n.Lk)("div",fe,[t[4]||(t[4]=(0,n.Lk)("div",{class:"offcanvas-header border-bottom border-secondary"},[(0,n.Lk)("h5",{class:"offcanvas-title text-white",id:"offcanvasRightLabel"},[(0,n.Lk)("i",{class:"bi bi-list me-2"}),(0,n.eW)(" Menu ")]),(0,n.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),(0,n.Lk)("div",ge,[t[3]||(t[3]=(0,n.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item"},[(0,n.Lk)("i",{class:"bi bi-person-circle fs-4 text-info"}),(0,n.Lk)("span",{class:"fw-semibold text-white"},"Profile")],-1)),(0,n.Lk)("div",{class:"d-flex align-items-center gap-3 p-3 rounded menu-item",onClick:t[0]||(t[0]=e=>o.logout()),style:{cursor:"pointer"}},t[2]||(t[2]=[(0,n.Lk)("i",{class:"bi bi-box-arrow-right fs-4 text-danger"},null,-1),(0,n.Lk)("span",{class:"fw-semibold text-danger"},"Logout",-1)]))])])]),(0,n.Lk)("div",ye,[i.user?((0,n.uX)(),(0,n.CE)("div",be,[(0,n.Lk)("div",we,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredContacts,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.uid,onClick:t=>o.startChat(e.uid),class:"list-group-item d-flex align-items-center gap-3 px-4 py-3 contact-item"},[(0,n.Lk)("img",{src:e.avatar||i.defaultAvatar,alt:"Profile",class:"rounded-circle",width:"55",height:"55"},null,8,ve),(0,n.Lk)("div",Le,[(0,n.Lk)("div",xe,[(0,n.Lk)("h6",Ce,(0,y.v_)(e.name),1)]),t[7]||(t[7]=(0,n.Lk)("div",{class:"text-white"},"You :Hi",-1))])],8,ke)))),128))])])):((0,n.uX)(),(0,n.CE)("div",Ee,[(0,n.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.signInAnonymously&&o.signInAnonymously(...e)),class:"btn btn-outline-light"}," Login Anonymously ")]))])])}s(2489);var Ae={name:"contactList",data(){return{contacts:[],user:null,defaultAvatar:"https://static.vecteezy.com/system/resources/previews/032/176/191/non_2x/business-avatar-profile-black-icon-man-of-user-symbol-in-trendy-flat-style-isolated-on-male-profile-people-diverse-face-for-social-network-or-web-vector.jpg"}},computed:{filteredContacts(){return this.user?this.contacts.filter((e=>e.uid!==this.user.uid)):this.contacts}},methods:{async signInAnonymously(){try{const e=await(0,T.zK)(O);this.user=e.user,await this.fetchContacts()}catch(e){_e.push("/"),console.error("Anonymous login error:",e)}},async fetchContacts(){try{const e=await(0,_.GG)((0,_.rJ)(X,"users"));this.contacts=[],e.forEach((e=>{const t=e.data();this.user&&t.uid===this.user.uid||this.contacts.push(t)}))}catch(e){console.error("Error fetching contacts:",e)}},logout(){const e=confirm("Are you sure you want to logout?");e&&(0,T.CI)(O).then((()=>{this.user=null,this.$router.push("/")})).catch((e=>{alert("Logout failed: "+e.message)}))},startChat(e){this.$router.push({name:"chat",params:{id:e}})}},mounted(){(0,T.hg)(O,(e=>{this.user=e,e?this.fetchContacts():this.signInAnonymously()}))}};const Ie=(0,d.A)(Ae,[["render",Se],["__scopeId","data-v-8dc463ac"]]);var De=Ie;const Ue=[{path:"/chat",name:"chat",component:V},{path:"/chat/:id",name:"chat",component:V},{path:"/",name:"login",component:ie},{path:"/vdiocall/:id",name:"vdiocall",component:pe},{path:"/contact",name:"contact",component:De}],Me=(0,g.aE)({history:(0,g.Bt)("/zchat/"),routes:Ue});var _e=Me,Te=(s(8077),s(7411)),$e=(s(7917),{data(){return{lastMessage:{}}},methods:{async showNotification(e,t={}){if(!("Notification"in window))return void console.warn("âŒ This browser does not support notifications.");const s=await Notification.requestPermission();if("granted"===s){const s=new Notification(e,t);s.onclick=()=>{console.log("Notification clicked!"),t.data?.url&&window.open(t.data.url,"_blank")}}else console.warn("Notification permission not granted!")}}});const je=(0,a.Ef)(f);je.use(_e),je.mixin($e),je.use(Te.Ay),je.mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,i){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,c=0;c<a.length;c++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,o=a[0],r=a[1],c=a[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(c)var d=c(s)}for(t&&t(a);l<o.length;l++)i=o[l],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},a=self["webpackChunkvue_z_chat"]=self["webpackChunkvue_z_chat"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5388)}));a=s.O(a)})();
//# sourceMappingURL=app.b2c3b0c8.js.map